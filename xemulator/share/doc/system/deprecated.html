
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deprecated features &#8212; QEMU  documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Removed features" href="removed-features.html" />
    <link rel="prev" title="Multi-process QEMU" href="multi-process.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="deprecated-features">
<h1>Deprecated features<a class="headerlink" href="#deprecated-features" title="Permalink to this headline">¶</a></h1>
<p>In general features are intended to be supported indefinitely once
introduced into QEMU. In the event that a feature needs to be removed,
it will be listed in this section. The feature will remain functional for the
release in which it was deprecated and one further release. After these two
releases, the feature is liable to be removed. Deprecated features may also
generate warnings on the console when QEMU starts up, or if activated via a
monitor command, however, this is not a mandatory requirement.</p>
<p>Prior to the 2.10.0 release there was no official policy on how
long features would be deprecated prior to their removal, nor
any documented list of which features were deprecated. Thus
any features deprecated prior to 2.10.0 will be treated as if
they were first deprecated in the 2.10.0 release.</p>
<p>What follows is a list of all features currently marked as
deprecated.</p>
<div class="section" id="system-emulator-command-line-arguments">
<h2>System emulator command line arguments<a class="headerlink" href="#system-emulator-command-line-arguments" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qemu-audio-environment-variables-and-audio-help-since-4-0">
<h3><code class="docutils literal notranslate"><span class="pre">QEMU_AUDIO_</span></code> environment variables and <code class="docutils literal notranslate"><span class="pre">-audio-help</span></code> (since 4.0)<a class="headerlink" href="#qemu-audio-environment-variables-and-audio-help-since-4-0" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">-audiodev</span></code> argument is now the preferred way to specify audio
backend settings instead of environment variables.  To ease migration to
the new format, the <code class="docutils literal notranslate"><span class="pre">-audiodev-help</span></code> option can be used to convert
the current values of the environment variables to <code class="docutils literal notranslate"><span class="pre">-audiodev</span></code> options.</p>
</div>
<div class="section" id="creating-sound-card-devices-and-vnc-without-audiodev-property-since-4-2">
<h3>Creating sound card devices and vnc without <code class="docutils literal notranslate"><span class="pre">audiodev=</span></code> property (since 4.2)<a class="headerlink" href="#creating-sound-card-devices-and-vnc-without-audiodev-property-since-4-2" title="Permalink to this headline">¶</a></h3>
<p>When not using the deprecated legacy audio config, each sound card
should specify an <code class="docutils literal notranslate"><span class="pre">audiodev=</span></code> property.  Additionally, when using
vnc, you should specify an <code class="docutils literal notranslate"><span class="pre">audiodev=</span></code> property if you plan to
transmit audio through the VNC protocol.</p>
</div>
<div class="section" id="creating-sound-card-devices-using-soundhw-since-5-1">
<h3>Creating sound card devices using <code class="docutils literal notranslate"><span class="pre">-soundhw</span></code> (since 5.1)<a class="headerlink" href="#creating-sound-card-devices-using-soundhw-since-5-1" title="Permalink to this headline">¶</a></h3>
<p>Sound card devices should be created using <code class="docutils literal notranslate"><span class="pre">-device</span></code> instead.  The
names are the same for most devices.  The exceptions are <code class="docutils literal notranslate"><span class="pre">hda</span></code> which
needs two devices (<code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">intel-hda</span> <span class="pre">-device</span> <span class="pre">hda-duplex</span></code>) and
<code class="docutils literal notranslate"><span class="pre">pcspk</span></code> which can be activated using <code class="docutils literal notranslate"><span class="pre">-machine</span>
<span class="pre">pcspk-audiodev=&lt;name&gt;</span></code>.</p>
</div>
<div class="section" id="chardev-backend-aliases-tty-and-parport-since-6-0">
<h3><code class="docutils literal notranslate"><span class="pre">-chardev</span></code> backend aliases <code class="docutils literal notranslate"><span class="pre">tty</span></code> and <code class="docutils literal notranslate"><span class="pre">parport</span></code> (since 6.0)<a class="headerlink" href="#chardev-backend-aliases-tty-and-parport-since-6-0" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">tty</span></code> and <code class="docutils literal notranslate"><span class="pre">parport</span></code> are aliases that will be removed. Instead, the
actual backend names <code class="docutils literal notranslate"><span class="pre">serial</span></code> and <code class="docutils literal notranslate"><span class="pre">parallel</span></code> should be used.</p>
</div>
<div class="section" id="risc-v-bios-since-5-1">
<h3>RISC-V <code class="docutils literal notranslate"><span class="pre">-bios</span></code> (since 5.1)<a class="headerlink" href="#risc-v-bios-since-5-1" title="Permalink to this headline">¶</a></h3>
<p>QEMU 4.1 introduced support for the -bios option in QEMU for RISC-V for the
RISC-V virt machine and sifive_u machine. QEMU 4.1 had no changes to the
default behaviour to avoid breakages.</p>
<p>QEMU 5.1 changes the default behaviour from <code class="docutils literal notranslate"><span class="pre">-bios</span> <span class="pre">none</span></code> to <code class="docutils literal notranslate"><span class="pre">-bios</span> <span class="pre">default</span></code>.</p>
<dl class="simple">
<dt>QEMU 5.1 has three options:</dt><dd><ol class="arabic simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-bios</span> <span class="pre">default</span></code> - This is the current default behavior if no -bios option</dt><dd><p>is included. This option will load the default OpenSBI firmware automatically.
The firmware is included with the QEMU release and no user interaction is
required. All a user needs to do is specify the kernel they want to boot
with the -kernel option</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-bios</span> <span class="pre">none</span></code> - QEMU will not automatically load any firmware. It is up</dt><dd><p>to the user to load all the images they need.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-bios</span> <span class="pre">&lt;file&gt;</span></code> - Tells QEMU to load the specified file as the firmwrae.</p></li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="short-form-boolean-options-since-6-0">
<h3>Short-form boolean options (since 6.0)<a class="headerlink" href="#short-form-boolean-options-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>Boolean options such as <code class="docutils literal notranslate"><span class="pre">share=on</span></code>/<code class="docutils literal notranslate"><span class="pre">share=off</span></code> could be written
in short form as <code class="docutils literal notranslate"><span class="pre">share</span></code> and <code class="docutils literal notranslate"><span class="pre">noshare</span></code>.  This is now deprecated
and will cause a warning.</p>
</div>
<div class="section" id="delay-option-for-socket-character-devices-since-6-0">
<h3><code class="docutils literal notranslate"><span class="pre">delay</span></code> option for socket character devices (since 6.0)<a class="headerlink" href="#delay-option-for-socket-character-devices-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>The replacement for the <code class="docutils literal notranslate"><span class="pre">nodelay</span></code> short-form boolean option is <code class="docutils literal notranslate"><span class="pre">nodelay=on</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">delay=off</span></code>.</p>
</div>
<div class="section" id="enable-fips-since-6-0">
<h3><code class="docutils literal notranslate"><span class="pre">--enable-fips</span></code> (since 6.0)<a class="headerlink" href="#enable-fips-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>This option restricts usage of certain cryptographic algorithms when
the host is operating in FIPS mode.</p>
<p>If FIPS compliance is required, QEMU should be built with the <code class="docutils literal notranslate"><span class="pre">libgcrypt</span></code>
library enabled as a cryptography provider.</p>
<p>Neither the <code class="docutils literal notranslate"><span class="pre">nettle</span></code> library, or the built-in cryptography provider are
supported on FIPS enabled hosts.</p>
</div>
<div class="section" id="writeconfig-since-6-0">
<h3><code class="docutils literal notranslate"><span class="pre">-writeconfig</span></code> (since 6.0)<a class="headerlink" href="#writeconfig-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">-writeconfig</span></code> option is not able to serialize the entire contents
of the QEMU command line.  It is thus considered a failed experiment
and deprecated, with no current replacement.</p>
</div>
<div class="section" id="userspace-local-apic-with-kvm-x86-since-6-0">
<h3>Userspace local APIC with KVM (x86, since 6.0)<a class="headerlink" href="#userspace-local-apic-with-kvm-x86-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>Using <code class="docutils literal notranslate"><span class="pre">-M</span> <span class="pre">kernel-irqchip=off</span></code> with x86 machine types that include a local
APIC is deprecated.  The <code class="docutils literal notranslate"><span class="pre">split</span></code> setting is supported, as is using
<code class="docutils literal notranslate"><span class="pre">-M</span> <span class="pre">kernel-irqchip=off</span></code> with the ISA PC machine type.</p>
</div>
<div class="section" id="hexadecimal-sizes-with-scaling-multipliers-since-6-0">
<h3>hexadecimal sizes with scaling multipliers (since 6.0)<a class="headerlink" href="#hexadecimal-sizes-with-scaling-multipliers-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>Input parameters that take a size value should only use a size suffix
(such as ‘k’ or ‘M’) when the base is written in decimal, and not when
the value is hexadecimal.  That is, ‘0x20M’ is deprecated, and should
be written either as ‘32M’ or as ‘0x2000000’.</p>
</div>
<div class="section" id="spice-password-string-since-6-0">
<h3><code class="docutils literal notranslate"><span class="pre">-spice</span> <span class="pre">password=string</span></code> (since 6.0)<a class="headerlink" href="#spice-password-string-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>This option is insecure because the SPICE password remains visible in
the process listing. This is replaced by the new <code class="docutils literal notranslate"><span class="pre">password-secret</span></code>
option which lets the password be securely provided on the command
line using a <code class="docutils literal notranslate"><span class="pre">secret</span></code> object instance.</p>
</div>
<div class="section" id="opened-property-of-rng-objects-since-6-0-0">
<h3><code class="docutils literal notranslate"><span class="pre">opened</span></code> property of <code class="docutils literal notranslate"><span class="pre">rng-*</span></code> objects (since 6.0.0)<a class="headerlink" href="#opened-property-of-rng-objects-since-6-0-0" title="Permalink to this headline">¶</a></h3>
<p>The only effect of specifying <code class="docutils literal notranslate"><span class="pre">opened=on</span></code> in the command line or QMP
<code class="docutils literal notranslate"><span class="pre">object-add</span></code> is that the device is opened immediately, possibly before all
other options have been processed.  This will either have no effect (if
<code class="docutils literal notranslate"><span class="pre">opened</span></code> was the last option) or cause errors.  The property is therefore
useless and should not be specified.</p>
</div>
<div class="section" id="loaded-property-of-secret-and-secret-keyring-objects-since-6-0-0">
<h3><code class="docutils literal notranslate"><span class="pre">loaded</span></code> property of <code class="docutils literal notranslate"><span class="pre">secret</span></code> and <code class="docutils literal notranslate"><span class="pre">secret_keyring</span></code> objects (since 6.0.0)<a class="headerlink" href="#loaded-property-of-secret-and-secret-keyring-objects-since-6-0-0" title="Permalink to this headline">¶</a></h3>
<p>The only effect of specifying <code class="docutils literal notranslate"><span class="pre">loaded=on</span></code> in the command line or QMP
<code class="docutils literal notranslate"><span class="pre">object-add</span></code> is that the secret is loaded immediately, possibly before all
other options have been processed.  This will either have no effect (if
<code class="docutils literal notranslate"><span class="pre">loaded</span></code> was the last option) or cause options to be effectively ignored as
if they were not given.  The property is therefore useless and should not be
specified.</p>
</div>
</div>
<div class="section" id="qemu-machine-protocol-qmp-commands">
<h2>QEMU Machine Protocol (QMP) commands<a class="headerlink" href="#qemu-machine-protocol-qmp-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="blockdev-open-tray-blockdev-close-tray-argument-device-since-2-8-0">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-open-tray</span></code>, <code class="docutils literal notranslate"><span class="pre">blockdev-close-tray</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8.0)<a class="headerlink" href="#blockdev-open-tray-blockdev-close-tray-argument-device-since-2-8-0" title="Permalink to this headline">¶</a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</div>
<div class="section" id="eject-argument-device-since-2-8-0">
<h3><code class="docutils literal notranslate"><span class="pre">eject</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8.0)<a class="headerlink" href="#eject-argument-device-since-2-8-0" title="Permalink to this headline">¶</a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</div>
<div class="section" id="blockdev-change-medium-argument-device-since-2-8-0">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-change-medium</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8.0)<a class="headerlink" href="#blockdev-change-medium-argument-device-since-2-8-0" title="Permalink to this headline">¶</a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</div>
<div class="section" id="block-set-io-throttle-argument-device-since-2-8-0">
<h3><code class="docutils literal notranslate"><span class="pre">block_set_io_throttle</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8.0)<a class="headerlink" href="#block-set-io-throttle-argument-device-since-2-8-0" title="Permalink to this headline">¶</a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</div>
<div class="section" id="blockdev-add-empty-string-argument-backing-since-2-10-0">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code> empty string argument <code class="docutils literal notranslate"><span class="pre">backing</span></code> (since 2.10.0)<a class="headerlink" href="#blockdev-add-empty-string-argument-backing-since-2-10-0" title="Permalink to this headline">¶</a></h3>
<p>Use argument value <code class="docutils literal notranslate"><span class="pre">null</span></code> instead.</p>
</div>
<div class="section" id="block-commit-arguments-base-and-top-since-3-1-0">
<h3><code class="docutils literal notranslate"><span class="pre">block-commit</span></code> arguments <code class="docutils literal notranslate"><span class="pre">base</span></code> and <code class="docutils literal notranslate"><span class="pre">top</span></code> (since 3.1.0)<a class="headerlink" href="#block-commit-arguments-base-and-top-since-3-1-0" title="Permalink to this headline">¶</a></h3>
<p>Use arguments <code class="docutils literal notranslate"><span class="pre">base-node</span></code> and <code class="docutils literal notranslate"><span class="pre">top-node</span></code> instead.</p>
</div>
<div class="section" id="nbd-server-add-and-nbd-server-remove-since-5-2">
<h3><code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code> and <code class="docutils literal notranslate"><span class="pre">nbd-server-remove</span></code> (since 5.2)<a class="headerlink" href="#nbd-server-add-and-nbd-server-remove-since-5-2" title="Permalink to this headline">¶</a></h3>
<p>Use the more generic commands <code class="docutils literal notranslate"><span class="pre">block-export-add</span></code> and <code class="docutils literal notranslate"><span class="pre">block-export-del</span></code>
instead.  As part of this deprecation, where <code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code> used a
single <code class="docutils literal notranslate"><span class="pre">bitmap</span></code>, the new <code class="docutils literal notranslate"><span class="pre">block-export-add</span></code> uses a list of <code class="docutils literal notranslate"><span class="pre">bitmaps</span></code>.</p>
</div>
</div>
<div class="section" id="system-accelerators">
<h2>System accelerators<a class="headerlink" href="#system-accelerators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mips-trap-and-emul-kvm-support-since-6-0">
<h3>MIPS <code class="docutils literal notranslate"><span class="pre">Trap-and-Emul</span></code> KVM support (since 6.0)<a class="headerlink" href="#mips-trap-and-emul-kvm-support-since-6-0" title="Permalink to this headline">¶</a></h3>
<p>The MIPS <code class="docutils literal notranslate"><span class="pre">Trap-and-Emul</span></code> KVM host and guest support has been removed
from Linux upstream kernel, declare it deprecated.</p>
</div>
</div>
<div class="section" id="system-emulator-cpus">
<h2>System emulator CPUS<a class="headerlink" href="#system-emulator-cpus" title="Permalink to this headline">¶</a></h2>
<div class="section" id="moxie-cpu-since-5-2-0">
<h3><code class="docutils literal notranslate"><span class="pre">moxie</span></code> CPU (since 5.2.0)<a class="headerlink" href="#moxie-cpu-since-5-2-0" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">moxie</span></code> guest CPU support is deprecated and will be removed in
a future version of QEMU. It’s unclear whether anybody is still using
CPU emulation in QEMU, and there are no test images available to make
sure that the code is still working.</p>
</div>
<div class="section" id="lm32-cpus-since-5-2-0">
<h3><code class="docutils literal notranslate"><span class="pre">lm32</span></code> CPUs (since 5.2.0)<a class="headerlink" href="#lm32-cpus-since-5-2-0" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">lm32</span></code> guest CPU support is deprecated and will be removed in
a future version of QEMU. The only public user of this architecture
was the milkymist project, which has been dead for years; there was
never an upstream Linux port.</p>
</div>
<div class="section" id="unicore32-cpus-since-5-2-0">
<h3><code class="docutils literal notranslate"><span class="pre">unicore32</span></code> CPUs (since 5.2.0)<a class="headerlink" href="#unicore32-cpus-since-5-2-0" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">unicore32</span></code> guest CPU support is deprecated and will be removed in
a future version of QEMU. Support for this CPU was removed from the
upstream Linux kernel, and there is no available upstream toolchain
to build binaries for it.</p>
</div>
<div class="section" id="icelake-client-cpu-model-since-5-2-0">
<h3><code class="docutils literal notranslate"><span class="pre">Icelake-Client</span></code> CPU Model (since 5.2.0)<a class="headerlink" href="#icelake-client-cpu-model-since-5-2-0" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Icelake-Client</span></code> CPU Models are deprecated. Use <code class="docutils literal notranslate"><span class="pre">Icelake-Server</span></code> CPU
Models instead.</p>
</div>
<div class="section" id="mips-i7200-cpu-model-since-5-2">
<h3>MIPS <code class="docutils literal notranslate"><span class="pre">I7200</span></code> CPU Model (since 5.2)<a class="headerlink" href="#mips-i7200-cpu-model-since-5-2" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">I7200</span></code> guest CPU relies on the nanoMIPS ISA, which is deprecated
(the ISA has never been upstreamed to a compiler toolchain). Therefore
this CPU is also deprecated.</p>
</div>
</div>
<div class="section" id="system-emulator-machines">
<h2>System emulator machines<a class="headerlink" href="#system-emulator-machines" title="Permalink to this headline">¶</a></h2>
<div class="section" id="raspberry-pi-raspi2-and-raspi3-machines-since-5-2">
<h3>Raspberry Pi <code class="docutils literal notranslate"><span class="pre">raspi2</span></code> and <code class="docutils literal notranslate"><span class="pre">raspi3</span></code> machines (since 5.2)<a class="headerlink" href="#raspberry-pi-raspi2-and-raspi3-machines-since-5-2" title="Permalink to this headline">¶</a></h3>
<p>The Raspberry Pi machines come in various models (A, A+, B, B+). To be able
to distinguish which model QEMU is implementing, the <code class="docutils literal notranslate"><span class="pre">raspi2</span></code> and <code class="docutils literal notranslate"><span class="pre">raspi3</span></code>
machines have been renamed <code class="docutils literal notranslate"><span class="pre">raspi2b</span></code> and <code class="docutils literal notranslate"><span class="pre">raspi3b</span></code>.</p>
</div>
</div>
<div class="section" id="device-options">
<h2>Device options<a class="headerlink" href="#device-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="emulated-device-options">
<h3>Emulated device options<a class="headerlink" href="#emulated-device-options" title="Permalink to this headline">¶</a></h3>
<div class="section" id="device-virtio-blk-scsi-on-off-since-5-0-0">
<h4><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">virtio-blk,scsi=on|off</span></code> (since 5.0.0)<a class="headerlink" href="#device-virtio-blk-scsi-on-off-since-5-0-0" title="Permalink to this headline">¶</a></h4>
<p>The virtio-blk SCSI passthrough feature is a legacy VIRTIO feature.  VIRTIO 1.0
and later do not support it because the virtio-scsi device was introduced for
full SCSI support.  Use virtio-scsi instead when SCSI passthrough is required.</p>
<p>Note this also applies to <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">virtio-blk-pci,scsi=on|off</span></code>, which is an
alias.</p>
</div>
</div>
<div class="section" id="block-device-options">
<h3>Block device options<a class="headerlink" href="#block-device-options" title="Permalink to this headline">¶</a></h3>
<div class="section" id="backing-since-2-12-0">
<h4><code class="docutils literal notranslate"><span class="pre">&quot;backing&quot;:</span> <span class="pre">&quot;&quot;</span></code> (since 2.12.0)<a class="headerlink" href="#backing-since-2-12-0" title="Permalink to this headline">¶</a></h4>
<p>In order to prevent QEMU from automatically opening an image’s backing
chain, use <code class="docutils literal notranslate"><span class="pre">&quot;backing&quot;:</span> <span class="pre">null</span></code> instead.</p>
</div>
<div class="section" id="rbd-keyvalue-pair-encoded-filenames-since-3-1-0">
<h4><code class="docutils literal notranslate"><span class="pre">rbd</span></code> keyvalue pair encoded filenames: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> (since 3.1.0)<a class="headerlink" href="#rbd-keyvalue-pair-encoded-filenames-since-3-1-0" title="Permalink to this headline">¶</a></h4>
<p>Options for <code class="docutils literal notranslate"><span class="pre">rbd</span></code> should be specified according to its runtime options,
like other block drivers.  Legacy parsing of keyvalue pair encoded
filenames is useful to open images with the old format for backing files;
These image files should be updated to use the current format.</p>
<p>Example of legacy encoding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">json</span><span class="p">:{</span><span class="s2">&quot;file.driver&quot;</span><span class="p">:</span><span class="s2">&quot;rbd&quot;</span><span class="p">,</span> <span class="s2">&quot;file.filename&quot;</span><span class="p">:</span><span class="s2">&quot;rbd:rbd/name&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>The above, converted to the current supported format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">json</span><span class="p">:{</span><span class="s2">&quot;file.driver&quot;</span><span class="p">:</span><span class="s2">&quot;rbd&quot;</span><span class="p">,</span> <span class="s2">&quot;file.pool&quot;</span><span class="p">:</span><span class="s2">&quot;rbd&quot;</span><span class="p">,</span> <span class="s2">&quot;file.image&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sheepdog-driver-since-5-2-0">
<h4><code class="docutils literal notranslate"><span class="pre">sheepdog</span></code> driver (since 5.2.0)<a class="headerlink" href="#sheepdog-driver-since-5-2-0" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">sheepdog</span></code> block device driver is deprecated. The corresponding upstream
server project is no longer actively maintained. Users are recommended to switch
to an alternative distributed block device driver such as RBD. The
<code class="docutils literal notranslate"><span class="pre">qemu-img</span> <span class="pre">convert</span></code> command can be used to liberate existing data by moving
it out of sheepdog volumes into an alternative storage backend.</p>
</div>
</div>
</div>
<div class="section" id="linux-user-mode-cpus">
<h2>linux-user mode CPUs<a class="headerlink" href="#linux-user-mode-cpus" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ppc64abi32-cpus-since-5-2-0">
<h3><code class="docutils literal notranslate"><span class="pre">ppc64abi32</span></code> CPUs (since 5.2.0)<a class="headerlink" href="#ppc64abi32-cpus-since-5-2-0" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ppc64abi32</span></code> architecture has a number of issues which regularly
trip up our CI testing and is suspected to be quite broken. For that
reason the maintainers strongly suspect no one actually uses it.</p>
</div>
<div class="section" id="mips-i7200-cpu-since-5-2">
<h3>MIPS <code class="docutils literal notranslate"><span class="pre">I7200</span></code> CPU (since 5.2)<a class="headerlink" href="#mips-i7200-cpu-since-5-2" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">I7200</span></code> guest CPU relies on the nanoMIPS ISA, which is deprecated
(the ISA has never been upstreamed to a compiler toolchain). Therefore
this CPU is also deprecated.</p>
</div>
</div>
<div class="section" id="related-binaries">
<h2>Related binaries<a class="headerlink" href="#related-binaries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qemu-img-amend-to-adjust-backing-file-since-5-1">
<h3>qemu-img amend to adjust backing file (since 5.1)<a class="headerlink" href="#qemu-img-amend-to-adjust-backing-file-since-5-1" title="Permalink to this headline">¶</a></h3>
<p>The use of <code class="docutils literal notranslate"><span class="pre">qemu-img</span> <span class="pre">amend</span></code> to modify the name or format of a qcow2
backing image is deprecated; this functionality was never fully
documented or tested, and interferes with other amend operations that
need access to the original backing image (such as deciding whether a
v3 zero cluster may be left unallocated when converting to a v2
image).  Rather, any changes to the backing chain should be performed
with <code class="docutils literal notranslate"><span class="pre">qemu-img</span> <span class="pre">rebase</span> <span class="pre">-u</span></code> either before or after the remaining
changes being performed by amend, as appropriate.</p>
</div>
<div class="section" id="qemu-img-backing-file-without-format-since-5-1">
<h3>qemu-img backing file without format (since 5.1)<a class="headerlink" href="#qemu-img-backing-file-without-format-since-5-1" title="Permalink to this headline">¶</a></h3>
<p>The use of <code class="docutils literal notranslate"><span class="pre">qemu-img</span> <span class="pre">create</span></code>, <code class="docutils literal notranslate"><span class="pre">qemu-img</span> <span class="pre">rebase</span></code>, or <code class="docutils literal notranslate"><span class="pre">qemu-img</span>
<span class="pre">convert</span></code> to create or modify an image that depends on a backing file
now recommends that an explicit backing format be provided.  This is
for safety: if QEMU probes a different format than what you thought,
the data presented to the guest will be corrupt; similarly, presenting
a raw image to a guest allows a potential security exploit if a future
probe sees a non-raw image based on guest writes.</p>
<p>To avoid the warning message, or even future refusal to create an
unsafe image, you must pass <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">backing_fmt=</span></code> (or the shorthand
<code class="docutils literal notranslate"><span class="pre">-F</span></code> during create) to specify the intended backing format.  You may
use <code class="docutils literal notranslate"><span class="pre">qemu-img</span> <span class="pre">rebase</span> <span class="pre">-u</span></code> to retroactively add a backing format to an
existing image.  However, be aware that there are already potential
security risks to blindly using <code class="docutils literal notranslate"><span class="pre">qemu-img</span> <span class="pre">info</span></code> to probe the format
of an untrusted backing image, when deciding what format to add into
an existing image.</p>
</div>
</div>
<div class="section" id="backwards-compatibility">
<h2>Backwards compatibility<a class="headerlink" href="#backwards-compatibility" title="Permalink to this headline">¶</a></h2>
<div class="section" id="runnability-guarantee-of-cpu-models-since-4-1-0">
<h3>Runnability guarantee of CPU models (since 4.1.0)<a class="headerlink" href="#runnability-guarantee-of-cpu-models-since-4-1-0" title="Permalink to this headline">¶</a></h3>
<p>Previous versions of QEMU never changed existing CPU models in
ways that introduced additional host software or hardware
requirements to the VM.  This allowed management software to
safely change the machine type of an existing VM without
introducing new requirements (“runnability guarantee”).  This
prevented CPU models from being updated to include CPU
vulnerability mitigations, leaving guests vulnerable in the
default configuration.</p>
<p>The CPU model runnability guarantee won’t apply anymore to
existing CPU models.  Management software that needs runnability
guarantees must resolve the CPU model aliases using the
<code class="docutils literal notranslate"><span class="pre">alias-of</span></code> field returned by the <code class="docutils literal notranslate"><span class="pre">query-cpu-definitions</span></code> QMP
command.</p>
<p>While those guarantees are kept, the return value of
<code class="docutils literal notranslate"><span class="pre">query-cpu-definitions</span></code> will have existing CPU model aliases
point to a version that doesn’t break runnability guarantees
(specifically, version 1 of those CPU models).  In future QEMU
versions, aliases will point to newer CPU model versions
depending on the machine type, so management software must
resolve CPU model aliases before starting a virtual machine.</p>
</div>
</div>
<div class="section" id="guest-emulator-isas">
<h2>Guest Emulator ISAs<a class="headerlink" href="#guest-emulator-isas" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nanomips-isa">
<h3>nanoMIPS ISA<a class="headerlink" href="#nanomips-isa" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">nanoMIPS</span></code> ISA has never been upstreamed to any compiler toolchain.
As it is hard to generate binaries for it, declare it deprecated.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">QEMU</a></h1>








<div id="editpage">
  <ul>
    <li><a href="https://gitlab.com/qemu-project/qemu/-/blob/master/docs/system/deprecated.rst">Page source</a></li>
  </ul>
</div><h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">System Emulation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="invocation.html">Invocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="keys.html">Keys in the graphical frontends</a></li>
<li class="toctree-l2"><a class="reference internal" href="mux-chardev.html">Keys in the character backend multiplexer</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitor.html">QEMU Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html">Disk Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="net.html">Network emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtio-net-failover.html">QEMU virtio-net standby (net_failover)</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb.html">USB emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvme.html">NVMe Emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ivshmem.html">Inter-VM Shared Memory device</a></li>
<li class="toctree-l2"><a class="reference internal" href="linuxboot.html">Direct Linux Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic-loader.html">Generic Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="guest-loader.html">Guest Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="vnc-security.html">VNC security</a></li>
<li class="toctree-l2"><a class="reference internal" href="tls.html">TLS setup for network services</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdb.html">GDB usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="managed-startup.html">Managed start up options</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpu-hotplug.html">Virtual CPU hotplug</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtio-pmem.html">virtio pmem</a></li>
<li class="toctree-l2"><a class="reference internal" href="pr-manager.html">Persistent reservation managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="targets.html">QEMU System Emulator Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-process.html">Multi-process QEMU</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Deprecated features</a></li>
<li class="toctree-l2"><a class="reference internal" href="removed-features.html">Removed features</a></li>
<li class="toctree-l2"><a class="reference internal" href="build-platforms.html">Supported build platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Mode Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interop/index.html">System Emulation Management and Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">System Emulation Guest Hardware Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devel/index.html">Developer Information</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, The QEMU Project Developers.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>